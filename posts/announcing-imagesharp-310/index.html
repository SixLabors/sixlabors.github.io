<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Six Labors : Announcing ImageSharp 3.1.0</title>
    <meta name="description" content="ImageSharp 3.1 - Unparalleled feature set, performance, and stability.">
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"/>
    <link 
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css"
      rel="stylesheet" 
      integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x"
      crossorigin="anonymous">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/default.min.css"/>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/highlightjs-themes@1.0.0/monokai_sublime.min.css"/>
    <link rel="stylesheet" href="/css/style.css">
    
    
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Six Labors">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="Six Labors">
    <meta name="msvalidate.01" content="BA6460B0F12FECDF7D03F34A5709833F"/>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-92691012-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-92691012-1');
    </script>
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "6o9zxkbyg4");
    </script>
  </head>
  <body>
    <header class="navbar navbar-expand-md sl-navbar shadow-sm">
      <nav class="container-xxl flex-wrap flex-md-nowrap">
        <a class="navbar-brand" href="/">
          <img
            src="/css/img/sixlabors.text.svg"
            alt="Six Labors"
            class="sl-brand"/>
          <span class="visually-hidden">Six Labors</span>
        </a>
        <button
          class="navbar-toggler collapsed"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#slNavbar"
          aria-controls="slNavbar"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            class="bi"
            fill="currentColor"
            viewBox="0 0 16 16">
            <path
              fill-rule="evenodd"
              d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"
            ></path>
          </svg>
        </button>
        <div class="navbar-collapse collapse" id="slNavbar">
          <ul class="navbar-nav flex-row flex-wrap sl-navbar-nav pt-2 py-md-0">
              <li class="nav-item col-6 col-md-auto" >
                <a 
                  class="nav-link p-2" 
                  href="/"
                  >Home</a>
              </li>
              <li class="nav-item col-6 col-md-auto" >
                <a 
                  class="nav-link p-2" 
                  href="/products/"
                  >Products</a>
              </li>
              <li class="nav-item col-6 col-md-auto" >
                <a 
                  class="nav-link p-2" 
                  href="/pricing/"
                  >Pricing</a>
              </li>
              <li class="nav-item col-6 col-md-auto" >
                <a 
                  class="nav-link p-2" 
                  href="https://docs.sixlabors.com"
                   target="_blank" rel="noopener">Documentation</a>
              </li>
              <li class="nav-item col-6 col-md-auto" >
                <a 
                  class="nav-link p-2" 
                  href="/posts/"
                  >Blog</a>
              </li>
          </ul>

          <hr class="d-md-none text-secondary"/>

          <ul class="navbar-nav flex-row flex-wrap ms-md-auto">
            <li class="nav-item col-6 col-md-auto">
              <a
                class="nav-link p-2"
                href="https://github.com/sixlabors"
                target="_blank"
                rel="noopener">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="36"
                  height="36"
                  class="navbar-nav-svg d-inline-block align-text-top"
                  viewBox="0 0 512 499.36"
                  role="img">
                  <title>GitHub</title>
                  <path
                    fill="currentColor"
                    fill-rule="evenodd"
                    d="M256 0C114.64 0 0 114.61 0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34 0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49 0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75 0 0 21.49-6.88 70.4 26.24a242.65 242.65 0 0 1 128.18 0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69 0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41 0 34.22-.31 61.83-.31 70.23 0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37 0 256 0z"
                  ></path>
                </svg>
                <span class="d-md-none ms-2">GitHub</span>
              </a>
            </li>
            <li class="nav-item col-6 col-md-auto">
              <a
                class="nav-link p-2"
                href="https://twitter.com/sixlabors"
                target="_blank"
                rel="noopener"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="36"
                  height="36"
                  class="navbar-nav-svg d-inline-block align-text-top"
                  viewBox="0 0 512 416.32"
                  role="img">
                  <title>Twitter</title>
                  <path
                    fill="currentColor"
                    d="M160.83 416.32c193.2 0 298.92-160.22 298.92-298.92 0-4.51 0-9-.2-13.52A214 214 0 0 0 512 49.38a212.93 212.93 0 0 1-60.44 16.6 105.7 105.7 0 0 0 46.3-58.19 209 209 0 0 1-66.79 25.37 105.09 105.09 0 0 0-181.73 71.91 116.12 116.12 0 0 0 2.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48 0 0 0 68 159.6a106.27 106.27 0 0 1-47.53-13.11v1.43a105.28 105.28 0 0 0 84.21 103.06 105.67 105.67 0 0 1-47.33 1.84 105.06 105.06 0 0 0 98.14 72.94A210.72 210.72 0 0 1 25 370.84a202.17 202.17 0 0 1-25-1.43 298.85 298.85 0 0 0 160.83 46.92"
                  ></path>
                </svg>
                <span class="d-md-none ms-2">Twitter</span>
              </a>
            </li>
            <li class="nav-item col-6 col-md-auto">
              <a
                class="nav-link p-2"
                href="https://opencollective.com/sixlabors"
                target="_blank"
                rel="noopener">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="36"
                  height="36"
                  fill="currentColor"
                  fill-rule="evenodd"
                  class="navbar-nav-svg d-inline-block align-text-top"
                  viewBox="0 0 40 41"
                  role="img">
                  <title>Open Collective</title>
                  <path
                    fill-opacity=".4"
                    d="M32.8 21c0 2.4-.8 4.9-2 6.9l5.1 5.1c2.5-3.4 4.1-7.6 4.1-12 0-4.6-1.6-8.8-4-12.2L30.7 14c1.2 2 2 4.3 2 7z"
                  ></path>
                  <path
                    d="M20 33.7a12.8 12.8 0 0 1 0-25.6c2.6 0 5 .7 7 2.1L32 5a20 20 0 1 0 .1 31.9l-5-5.2a13 13 0 0 1-7 2z"
                  ></path>
                </svg>
                <span class="d-md-none ms-2">Open Collective</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </header>
    <main class="tmpl-post" role="main">
      



      <div class="masthead">
  <div class="container">
    <h1 class="mb-3">
      Announcing ImageSharp 3.1.0
    </h1>
    <p class="lead mb-4">
      ImageSharp 3.1 - Unparalleled feature set, performance, and stability.
    </p>
    <div><a href="/tags/releases/" class="post-tag btn btn-primary shadow">Releases</a><a href="/tags/imagesharp/" class="post-tag btn btn-primary shadow">ImageSharp</a>
    </div>
  </div>
</div>

<section>
  <div class="container">
    <div class= row>
      <div class="col-md-8">
        <article>
          <time datetime="2023-12-01">01 Dec 2023</time>

          <div class="ratio ratio-16x9">
<iframe src="https://www.youtube.com/embed/LaTGrV58wec" allow="autoplay; encrypted-media;" allowfullscreen></iframe>
</div>
<p>We are very excited to announce the release of ImageSharp 3.1.0. You can <a href="https://www.nuget.org/packages/SixLabors.ImageSharp/3.1.0" target="_blank">download it today</a>.</p>
<p>As always, we want to thank everyone who has contributed to this release and the community for all the feedback and support. We couldn't have done it without you!</p>
<h2 id="what's-new-since-v3.0.0" tabindex="-1">What's new since V3.0.0 <a class="direct-link" href="#what's-new-since-v3.0.0">#</a></h2>
<p>This release contains a very large number of improvements and bug fixes. We've also added support for a new format and enhanced several more.</p>
<ul>
<li>Support for animated Webp images, including both decoding and encoding, is now available.</li>
<li>Animated Png images are now supported, encompassing both decoding and encoding capabilities.</li>
<li>The software has been enhanced to allow seamless conversion between animated image formats.</li>
<li>Quite Ok (Qoi) image support, inclusive of decoding and encoding, has been added.</li>
<li>Functionality to read, preserve, and reuse the color palette of a Png image is now integrated.</li>
<li>Similarly, the ability to read, preserve, and reuse the color palette of a Gif image has been incorporated.</li>
<li>Reading and writing CICP color profiles in Png images is now supported.</li>
<li>Enhancements have been made to the resilience of Jpeg, Pbm, Png, and Tiff decoders against malicious attacks, aligning them with the standards of other decoders.</li>
<li>The allocations of the lossless Webp encoder have been reduced by 56%.</li>
<li>Asynchronous file operations have seen a performance improvement.</li>
<li>Several bottlenecks now include SIMD integration for enhanced performance.</li>
<li>Much much more....</li>
</ul>
<p>Please read the <a href="https://github.com/SixLabors/ImageSharp/releases/tag/v3.1.0" target="_blank">release notes</a> for detailed release information.</p>
<h3 id="breaking-changes" tabindex="-1">Breaking Changes <a class="direct-link" href="#breaking-changes">#</a></h3>
<p>Unfortunately in order to fix some issues we had to introduce some breaking changes (<em>listed below</em>). We always try to avoid breaking changes but sometimes they are unavoidable. We apologize for any inconvenience this may cause.</p>
<ul>
<li>API changes have been implemented in the default <code>Configuration</code> API to address a problem that increased the size of AOT compiled assemblies by 77% more than anticipated (<em>breaking</em>).</li>
<li>The <code>DrawImage</code> functionality has undergone numerous fixes and significant enhancements to support more complex scenarios (<em>breaking</em>).</li>
<li>To avoid namespace collisions, the approach to automatic namespace includes added for v3.0.0 has been reversed (<em>breaking</em>).</li>
</ul>
<h2 id="feature-highlights." tabindex="-1">Feature Highlights. <a class="direct-link" href="#feature-highlights.">#</a></h2>
<h3 id="animated-webp%2C-png%2C-and-gif-oh-my!" tabindex="-1"><em>Animated Webp, Png, and Gif Oh My!</em> <a class="direct-link" href="#animated-webp%2C-png%2C-and-gif-oh-my!">#</a></h3>
<p>We're really excited to showcase this functionality as it embodies the core principles of ImageSharp. We've taken a complex operation and made it simple to perform.</p>
<p>Animated images are a great way to add some life to your website or application. They can be used to create simple animations or to add some fun to your UI, the different formats though contain different features and limitations and require, at times, complex operations to convert between them. Most people are oblivious to these complexities and just want to get on with the job of creating great content and we want to help them do that.</p>
<p>The following code demonstrates how to load an animated Gif image, change the repeat count so that it only runs one time, and save it as an animated Png image. Under the hood this will convert any animation related metadata contained within the image and it's frames.</p>
<div class="frame">
<pre><code class="language-c#">using Image image = Image.Load(&quot;animated.gif&quot;);

GifMetadata gifMetadata = image.Metadata.GetGifMetadata();
gifMetadata.RepeatCount = 1;

image.Save(&quot;animated.png&quot;);
</code></pre>
</div>
<p>Isn't that cool? We think so!</p>
<p>But wait, it gets better. During the encoding process we optimize the image to ensure that it is as small as possible.</p>
<h4 id="a-super-quick-primer-in-animated-image-formats" tabindex="-1">A <em>Super Quick</em> Primer in Animated Image Formats <a class="direct-link" href="#a-super-quick-primer-in-animated-image-formats">#</a></h4>
<p>Animated image formats are cleverly designed to reuse data across frames. The first frame is stored as a complete image, while subsequent frames are stored as a series of delta changes. These deltas are applied to the first frame to construct the final image, enabling a compact storage of frame data.</p>
<p>However, this method comes with a trade-off. When an image is loaded for editing, these optimizations are discarded. The reason is that the data for each frame must be assembled from the deltas of previous frames, creating a single image that contains enough data for successful editing (<em>e.g., sampling of neighboring pixels during resize operations</em>). Consequently, if the image is re-saved after editing, even without alterations, the original optimizations are lost. This can result in the final image being significantly larger than necessary.</p>
<h4 id="the-solution" tabindex="-1">The Solution <a class="direct-link" href="#the-solution">#</a></h4>
<p>In the encoding process, we identify duplicate pixel data across frames. Based on the metadata within each frame, we apply optimizations to ensure that this data is stored only once. This strategy leads to substantial reductions in the final image size. Moreover, these optimizations are enhanced by SIMD (Single Instruction, Multiple Data), ensuring rapid execution.</p>
<p>Given a sample animated gif containing a picture of Jake and Finn from Adventure Time we can see the following results. The original image weighs in at 52.3KB</p>
<p><small><i>Note the image has been re-encoded to only run 3 times to make the page more accessible so you might have to reload the page to see the animation</i></small></p>
<div class="row text-center mb-3">
    <div class="col-sm-6 col-md-3">
        <img width="100px" src="/img/giphy.gif" alt="Jake and Finn from Adventure Time encoded as an animated gif" />
        <br/>
        Gif 45.2KB
    </div>
    <div class="col-sm-6 col-md-3">
        <img width="100px" src="/img/giphy.png" alt="Jake and Finn from Adventure Time encoded as an animated png" />
        <br/>
        Png 33.3KB
    </div>
    <div class="col-sm-6 col-md-3">
        <img width="100px" src="/img/giphy.gif" alt="Jake and Finn from Adventure Time encoded as an animated lossless Webp" />
        <br/>
        Webp Lossless 27KB
    </div>
    <div class="col-sm-6 col-md-3">
        <img width="100px" src="/img/giphy.png" alt="Jake and Finn from Adventure Time encoded as an animated lossy Webp" />
        <br/>
        Webp Lossy 29.8KB
    </div>
</div>
<p>In this example, our optimization process has enabled enhancements over the original in all formats. Typically, our encoded optimizations yield comparable improvements in most use cases. However, there are rare exceptions, especially when compared to some highly optimized, handcrafted images. The good news is that ImageSharp offers detailed control over every pixel and metadata property. This allows you to fine-tune any image to your heart's content, achieving maximum optimization.</p>
<h3 id="qoi---a-new-image-format" tabindex="-1">Qoi - A new image format <a class="direct-link" href="#qoi---a-new-image-format">#</a></h3>
<p>The Quite OK Image Format (QOI) is a specification for lossless image compression of 24-bit (8 bits per color RGB) or 32-bit (8 bits per color with 8-bit alpha channel RGBA) color raster (bitmapped) images, invented by Dominic Szablewski and first announced on 24 November 2021.</p>
<p>The intended purpose was to create an open source lossless compression method, that was faster and easier to implement than PNG. A third party <a href="https://www.youtube.com/watch?v=EFUYNoFRHQI" target="_blank">YouTube</a> video explains how PNG and QOI compression are performed. Figures specified in the announcement and the video claim twenty to fifty times faster encoding, and three to four times faster decoding speed compared to PNG, with similar file sizes. The author has donated the specification to the public domain (CC0).</p>
<p>For more information please see the <a href="https://qoiformat.org/" target="_blank">Qoi website</a>.</p>
<p>ImageSharp v3.1.0 adds full support for decoding and encoding Qoi images.</p>
<p>Please note that Qoi is a new format and as such is not yet widely supported. We hope that this will change in the future.</p>
<h2 id="the-future" tabindex="-1">The Future <a class="direct-link" href="#the-future">#</a></h2>
<p>We'll be publishing new releases over the next few days of all our libraries that depend on ImageSharp. Afterwards we'll start working on v4.0.0. This will be the first version to explicitly target .NET 8 and we're super excited to be able to take advantages of the new performance and languages features available to us. We'll be sharing more details about this release soon.</p>
<h2 id="closing" tabindex="-1">Closing <a class="direct-link" href="#closing">#</a></h2>
<p>Thanks again for all the feedback and usage. It's been a pleasure to build ImageSharp so far and to see so many people try it out; we really appreciate it. Please continue exploring the product and learning what it's capable of.</p>
<p><strong><em>ImageSharp V3.1.0 is licensed under the <a href="https://raw.githubusercontent.com/SixLabors/ImageSharp/main/LICENSE" target="_blank">Six Labors Split License</a>. This means that it is free to use in both non-commercial and certain commercial applications. However, if you are using it in a commercial application and your organization boasts an annual gross income exceeding 1M USD per year you must purchase a commercial license. Please see the <a href="/pricing/">Pricing page</a> for more information.</em></strong></p>

            <hr>
            <ul>
                <li>Next: <a href="/posts/licence-enforcement-changes/">License Enforcement Changes and a New Subscription Tier</a>
                </li>
              
                <li>Previous: <a href="/posts/announcing-imagesharp-drawing-100/">Announcing ImageSharp.Drawing 1.0.0</a>
                </li>
              
            </ul>
        </article>
      </div>
      <div class="col-md-3 offset-md-1">
        <aside>
          <h3>Tags</h3>
          <ul>
            
              
              <li>
                <a href="/tags/imagesharp/" class="post-tag btn btn-primary shadow">ImageSharp</a>
              </li>
            
              
              <li>
                <a href="/tags/fonts/" class="post-tag btn btn-primary shadow">Fonts</a>
              </li>
            
              
              <li>
                <a href="/tags/shapes/" class="post-tag btn btn-primary shadow">Shapes</a>
              </li>
            
              
              <li>
                <a href="/tags/releases/" class="post-tag btn btn-primary shadow">Releases</a>
              </li>
            
              
              <li>
                <a href="/tags/drawing/" class="post-tag btn btn-primary shadow">Drawing</a>
              </li>
            
              
              <li>
                <a href="/tags/imagesharp.web/" class="post-tag btn btn-primary shadow">ImageSharp.Web</a>
              </li>
            
              
              <li>
                <a href="/tags/announcements/" class="post-tag btn btn-primary shadow">Announcements</a>
              </li>
            
              
              <li>
                <a href="/tags/licensing/" class="post-tag btn btn-primary shadow">Licensing</a>
              </li>
            
          </ul>

        </aside>

        <aside>
          
          <h3>Recent  Posts
          </h3>

          
          
          <ul class="postlist">
            
              <li class="postlist-item">
                <a href="/posts/licence-enforcement-changes/" class="postlist-link">
                  License Enforcement Changes and a New Subscription Tier
                  
                </a>
              </li>
            
              <li class="postlist-item">
                <a href="/posts/announcing-imagesharp-310/" class="postlist-link">
                  Announcing ImageSharp 3.1.0
                  
                </a>
              </li>
            
              <li class="postlist-item">
                <a href="/posts/announcing-imagesharp-drawing-100/" class="postlist-link">
                  Announcing ImageSharp.Drawing 1.0.0
                  
                </a>
              </li>
            
              <li class="postlist-item">
                <a href="/posts/announcing-fonts-100/" class="postlist-link">
                  Announcing Fonts 1.0.0
                  
                </a>
              </li>
            
              <li class="postlist-item">
                <a href="/posts/announcing-imagesharp-web-300/" class="postlist-link">
                  Announcing ImageSharp.Web 3.0.0
                  
                </a>
              </li>
            
          </ul>

          <p>More posts can be found in <a href="/posts/">the archive</a>.</p>
        </aside>
      </div>
    </div>
  </div>
</section>


    </main>

    <footer class="sl-footer p-3 p-md-5 mt-5 bg-light text-center text-sm-start">
      <div class="container">
        <ul class="sl-footer-links ps-0 mb-3">
          <li class="d-inline-block">
            <a href="https://github.com/sixlabors">GitHub</a>
          </li>
          <li class="d-inline-block ms-3">
            <a href="https://twitter.com/sixlabors">Twitter</a>
          </li>
        </ul>
        <p class="mb-0">Copyright Six Labors &copy;</p>
        <hr/>
        <p>
          <img
            src="/css/img/sixlabors.text.svg"
            alt="Six Labors"
            class="sl-brand"/>
        </p>
        <p>Six Labors acknowledges the traditional owners and custodians of country throughout Australia and acknowledges their continuing connection to land, waters and community. We pay our respects to the people, the cultures and the elders past, present and emerging.</p>
      </div>
    </footer>

    <!-- Current page: /posts/announcing-imagesharp-310/ -->
    <script 
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/highlightjs-line-numbers.js@2.9.0/dist/highlightjs-line-numbers.min.js"></script>
    <script>
      hljs.highlightAll();
      hljs.initLineNumbersOnLoad({singleLine: true});
    </script>
  </body>
</html>